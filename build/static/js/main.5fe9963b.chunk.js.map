{"version":3,"sources":["common/ChatBody/ChatBody.module.css","common/MessageForm/MessageForm.module.css","common/ControlPanel/ControlPanel.module.css","common/MenuLanguage/MenuLanguage.module.css","common/PreloaderConnection/PreloaderConnection.module.css","common/Time/Time.module.css","types/historyMessages.ts","common/PreloaderConnection/PreloaderConnection.tsx","common/MessageHeader/MessageHeader.tsx","assets/img/admin_badge.png","assets/img/moderator_badge.png","common/MessageText/MessageText.tsx","common/Time/Time.tsx","common/MessageItem/MessageItem.tsx","assets/img/avatar1.png","hooks/useTypedSelector.ts","store/action-creators/historyMessages.ts","store/action-creators/index.ts","common/ChatBody/ChatBody.tsx","hooks/useActions.ts","common/MessageForm/MessageForm.tsx","common/ControlPanel/ControlPanel.tsx","common/MenuLanguage/MenuLanguage.tsx","components/chat/Chat.tsx","App.tsx","store/reducers/historyReducer.ts","store/reducers/index.ts","store/index.ts","index.tsx","components/chat/Chat.module.css","common/MessageItem/MessageItem.module.css","common/MessageHeader/MessageHeader.module.css"],"names":["module","exports","HistoryMessagesEnums","PreloaderConnection","className","cls","progress","CircularProgress","sx","color","MessageHeader","avatar","avatarColor","userName","userRating","messageHeader","style","background","src","alt","badge","MessageText","text","Time","createdAt","messageTime","d","Date","minutes","getUTCMinutes","toString","length","getUTCHours","getDateTime","MessageItem","message","getLevelValue","index","useMemo","Math","floor","random","from","messageBlock","myMessage","useTypedSelector","useSelector","Intl","DateTimeFormat","fetchHistoryMessages","limit","skip","dispatch","a","type","FETCH_HISTORY","axios","get","response","FETCH_HISTORY_SUCCESS","payload","data","reverse","FETCH_HISTORY_ERROR","setMessage","SET_MESSAGE","error","HistoryMessagesCreators","ChatBody","newMessage","socket","state","historyMessages","chatBodyRef","React","useRef","lastMessageRef","messagesEndRef","useDispatch","bindActionCreators","ActionCreators","useActions","useState","viewHistory","setViewHistory","socketConnected","setSocketConnected","lastPosition","setLastPosition","useEffect","connect","on","connected","toISOString","id","slice","emit","current","addEventListener","scrollHandler","scrollTop","scrollHeight","clientHeight","count","e","target","offsetTop","toggleHistoryFlag","chatBody","ref","map","MessageId","fontSize","lineHeight","height","MessageForm","onSubmit","changeMessage","insertEmoji","tempNewMessageText","messageFieldRef","clickOnEmoji","focus","initialValues","render","handleSubmit","form","submitting","pristine","values","chatForm","textField","name","props","input","placeholder","autoComplete","onChange","value","formButton","opacity","cursor","onClick","ControlPanel","hideChatToggle","controlPanel","expandMenu","ShrinkOutlined","minimizeMenu","MinusOutlined","MenuLanguage","lang","setLanguage","menu","key","Item","menuLang","overlay","trigger","langLink","preventDefault","DownOutlined","Chat","tab","setTab","setNewMessage","setTempNewMessageText","hideChat","setHideChat","innerTheme","createTheme","palette","primary","main","green","chat","TabContext","chatHeader","headerMenu","Box","maxWidth","ThemeProvider","theme","Tabs","event","newValue","variant","scrollButtons","padding","margin","Tab","label","TabPanel","chatContainer","chatFooter","App","io","transports","initialState","loading","rootReducer","combineReducers","action","SET_LIMIT_SKIP","store","createStore","applyMiddleware","thunk","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.5fe9963b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"chatBody\":\"ChatBody_chatBody__XQZ1a\",\"messagesEndRef\":\"ChatBody_messagesEndRef__30Kun\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chatForm\":\"MessageForm_chatForm__Z0BbV\",\"textField\":\"MessageForm_textField__gTk9-\",\"formButton\":\"MessageForm_formButton__1uVVz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"controlPanel\":\"ControlPanel_controlPanel__bs8ns\",\"expandMenu\":\"ControlPanel_expandMenu__34tEB\",\"minimizeMenu\":\"ControlPanel_minimizeMenu__2FWYo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuLang\":\"MenuLanguage_menuLang__119sL\",\"langLink\":\"MenuLanguage_langLink__3mlp-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"progress\":\"PreloaderConnection_progress__nkid4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageTime\":\"Time_messageTime__15ZjL\"};","import DateTimeFormat = Intl.DateTimeFormat;\r\n\r\nexport enum HistoryMessagesEnums {\r\n    FETCH_HISTORY= 'FETCH_HISTORY',\r\n    FETCH_HISTORY_SUCCESS = 'FETCH_HISTORY_SUCCESS',\r\n    FETCH_HISTORY_ERROR = 'FETCH_HISTORY_ERROR',\r\n    SET_MESSAGE = 'SET_MESSAGE',\r\n    SET_LIMIT_SKIP = 'SET_LIMIT_SKIP',\r\n}\r\nexport interface Message {\r\n    id: string\r\n    from: string\r\n    text: string\r\n    createdAt: string\r\n}\r\n\r\nexport interface HistoryState {\r\n    historyMessages: Message[]\r\n    skip: number\r\n    limit: number\r\n    error: string | null\r\n    loading: boolean\r\n}\r\n\r\ninterface FetchHistoryMessages {\r\n    type: HistoryMessagesEnums.FETCH_HISTORY\r\n}\r\ninterface FetchHistoryMessagesSuccess {\r\n    type: HistoryMessagesEnums.FETCH_HISTORY_SUCCESS\r\n    payload: Message[]\r\n}\r\ninterface FetchHistoryMessagesError {\r\n    type: HistoryMessagesEnums.FETCH_HISTORY_ERROR\r\n    payload: string\r\n}\r\ninterface SetMessage {\r\n    type: HistoryMessagesEnums.SET_MESSAGE\r\n    payload: Message\r\n}\r\ninterface SetSkipLimit {\r\n    type: HistoryMessagesEnums.SET_LIMIT_SKIP\r\n    payload: {\r\n        limit: number\r\n        skip: number\r\n    }\r\n}\r\nexport type HistoryMessagesTypes = FetchHistoryMessages | FetchHistoryMessagesSuccess | FetchHistoryMessagesError | SetMessage | SetSkipLimit\r\n","import React from 'react';\r\nimport cls from \"./PreloaderConnection.module.css\";\r\nimport CircularProgress from \"@mui/material/CircularProgress\";\r\n\r\n\r\ninterface PropsType {\r\n\r\n}\r\nconst PreloaderConnection = () => {\r\n    return (\r\n         <div className={cls.progress}>Connection ... <CircularProgress sx={{color: '#ffffff'}} /></div>\r\n    );\r\n};\r\n\r\nexport default PreloaderConnection;\r\n","import React from 'react';\r\nimport cls from \"./MessageHeader.module.css\";\r\nimport admin_badge from \"../../assets/img/admin_badge.png\";\r\nimport moderator_badge from \"../../assets/img/moderator_badge.png\";\r\n\r\ninterface PropsType {\r\n    avatar: string\r\n    avatarColor: string\r\n    userName: string\r\n    userRating: number\r\n}\r\n\r\nconst MessageHeader: React.FC<PropsType> = ({avatar, avatarColor, userName, userRating}) => {\r\n    return (\r\n        <div className={cls.messageHeader}>\r\n            <div className={cls.avatar} style={{background: avatarColor}}>\r\n                <img src={avatar} alt=\"\"/>\r\n            </div>\r\n            <div className={cls.userName}>\r\n                {userName}\r\n            </div>\r\n            {\r\n\r\n                <div className={cls.badge}>\r\n                    <img src={(userRating < 10 && userRating > 8) ? admin_badge : (userRating <= 8 && userRating > 5) ? moderator_badge : ''} alt=\"\"/>\r\n                </div>\r\n            }\r\n            {\r\n                userRating &&\r\n                <div className={cls.userRating}>\r\n                    {userRating}\r\n                </div>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MessageHeader;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAH6SURBVHgBXVJLaxRBEP76sYOgZiNZAlEkEh9gDiIJRljRTSDuejQQQdzg8wf4+AOC+CO8GBM85CJETz4Qsl4MKmhExCAIq65G0YuLxOxMT7fVNZvJJDVT3TVV39dVU10CGTnzvac3+OtGIFESEMOAowc1WPVMaTt3u2/p8ypW+GViseeyFOIKgXZhnfgweYVILOfqZN+/u+/bVSae/rDTtSEQzmcRGbL/EkxmBL0z/V+F9CETS0RW8R7GCnuCImb2f2HdHRwhH8Xbapzi45gYETgygveVSOJofjzNN7C5jBb5jE2IoREZovUBxYF/LaDYWcaL3/Os5cI4lM0ToV2V1WtEEyekyCiMFk5hi+7AbOMenv58wvZQvsJE/qU4yaiTUgWfYWKL4rbjHDjXdynpFkmlMIZHvx4gpyS5bIZIJXhQl9qBUtcomlETf8ImAxrLDQx2HkbOdiDEMjVXZkuVNZ/1wNYhdt54dxPV51VU5ycw+ekO+050j3FjqMML6QAMzh086YSdXWkZtMIYko4LtOIbjKh8S7opUAgCDa3khVfHFqb4Upamfyx2n90uHVRJSIWczkGpHLztVSlNJXpbX3s9/OZWmnF1vvofD4w4KSZpUnrTSfGrdXVpzcX3lbc1YriNxFT2Pjx0Xkh5neawTiM49bHycnoj5j/R0c/6DjubWgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHESURBVHgBXVI9bxNBFJxZn+xLCMQ1BYloEF2goCXUNGmQSAWkoHWi9CiioAMpLU1CRQdpqEDC/INQ0pkSCYQRgfh8d/syu3vnWFnpTu/Nm3lfu8TcsQ9YQY17cLgLYh3GgA7h8QUdfOZ9fG+5jIL3GIi0DbNVkDaXirCWpZ/ZSEmO+AA7SfhWUIpGVx7paBE0WFOCbMLcBF20C7kTfTf2jA897foO7DRh/uojclPY6gBePqZJnoRTBKJVE0tNrT1DWSyzmvbhbu1FSm39yEGRGsjair4E/bQZvCfSzW0ZauvKShKGmCp2upgThorhqxP4/9sQC3cGYN7HyfERltY2pFS8UEcec60WQWwxGM6fT/swEapfI/z+uJ9A38xXpq3PWkVFtNk6xRg/XtyGy5fRXewnMCQtw1LTHtrlDF0p6GQc3Z7QS39Hlv/8Gu3zihaKHDe3qiS72Khr9+6fNlaUxoUurddNmSclcSo8z2iLebhfPMle4TDm40u9hso/z2UudQjFkan1TPPk3nBZA/VCtwV2g2hWsTksn2LdeRw48pquQq8mLMKCNdKIW9lrDMPDuyicHdvCY800kDkW45AHeHORcwZAsciOrZKp8wAAAABJRU5ErkJggg==\"","import React from 'react';\r\nimport cls from './MessageText.module.css'\r\n\r\ninterface PropsType {\r\n    text: string\r\n}\r\n\r\nconst MessageText: React.FC<PropsType> = ({text}) => {\r\n    return (\r\n        <>\r\n            {text}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default MessageText;\r\n","import React from 'react';\r\nimport cls from \"./Time.module.css\";\r\n\r\n\r\ninterface PropsType {\r\n    createdAt: string\r\n}\r\nconst Time: React.FC<PropsType> = ({createdAt}) => {\r\n\r\n    const getDateTime = (createdAt: string) => {\r\n        const d = new Date(createdAt);\r\n        const minutes = d.getUTCMinutes().toString()\r\n        if (minutes.length < 2) {\r\n            return d.getUTCHours() + ':' + '0' + minutes\r\n        }\r\n        // return d.getUTCHours() + ':' + d.getUTCMinutes() + ':' + d.getSeconds()\r\n        return d.getUTCHours() + ':' + d.getUTCMinutes()\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className={cls.messageTime}>\r\n                {\r\n                    createdAt &&\r\n                    getDateTime(createdAt)\r\n                }\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Time;\r\n","import React, {useMemo} from 'react';\r\nimport cls from \"./MessageItem.module.css\";\r\n\r\nimport {Message} from \"../../types/historyMessages\";\r\nimport MessageHeader from \"../MessageHeader/MessageHeader\";\r\nimport MessageText from \"../MessageText/MessageText\";\r\nimport Time from \"../Time/Time\";\r\nimport avatar1 from \"../../assets/img/avatar1.png\";\r\n\r\n\r\n\r\ninterface PropsType {\r\n    message: Message\r\n    index: number\r\n\r\n}\r\nconst MessageItem: React.FC<PropsType> = ({message, index}) => {\r\n\r\n    const getLevelValue  = useMemo(() => {\r\n        return (Math.floor(Math.random() * (1 - 10)) + 10);\r\n    }, [])\r\n\r\n    return (\r\n            <>\r\n            {\r\n                message.from !== 'me' &&\r\n                <div className={cls.message}>\r\n                    <div className={cls.messageBlock}>\r\n                        {/*<span>{index}={message.id}</span>*/}\r\n                        {\r\n                            message.from &&\r\n                            <MessageHeader avatar={avatar1} avatarColor={'#DD8A26'}\r\n                                           userName={message.from}\r\n                                           userRating={getLevelValue}/>\r\n\r\n                        }\r\n                        {/*index={index + 1}<br/>*/}\r\n                        {/*{message.id}<br/><br/>*/}\r\n                        <MessageText text={message.text}/>\r\n                    </div>\r\n                    {\r\n                        message.createdAt &&\r\n                        <Time createdAt={message.createdAt} />\r\n                    }\r\n                </div>\r\n            }\r\n            {\r\n                message.from === 'me' &&\r\n                <div className={cls.message + ' ' + cls.myMessage}>\r\n                    {\r\n                        message.createdAt &&\r\n                        <Time createdAt={message.createdAt} />\r\n                    }\r\n                    <div className={cls.messageBlock}>\r\n                        <MessageText text={message.text}/>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </>\r\n    );\r\n};\r\n\r\nexport default MessageItem;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAALCAYAAACzkJeoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACISURBVHgBXY8BEYAgDEXBM4ARjEADNYE0kAhGsIE00gZiAjWBNsA/3e6Uf/duwLi/P6WgGGNBqEQZVwN6fJh+XTxs8dXJLMBK03DTg5Irqci01oFNLpx31JBai62MGNMm2dVgEFtZg+SSDDbHXSxaCoRa0XyaTXseYOYPHVhBw+EeK8d2/hv0BrlGjqPo3sUTAAAAAElFTkSuQmCC\"","import {TypedUseSelectorHook, useSelector} from \"react-redux\";\r\nimport {RootState} from \"../store/reducers\";\r\n\r\nexport const useTypedSelector: TypedUseSelectorHook<RootState> = useSelector\r\n","import {Dispatch} from \"redux\";\r\nimport {HistoryMessagesEnums, HistoryMessagesTypes, Message} from \"../../types/historyMessages\";\r\nimport axios, {AxiosResponse} from \"axios\";\r\n\r\n\r\nexport const fetchHistoryMessages = (limit: number, skip: number) => {\r\n    return async (dispatch: Dispatch<HistoryMessagesTypes>) => {\r\n        try {\r\n            dispatch({type: HistoryMessagesEnums.FETCH_HISTORY})\r\n            const response: AxiosResponse<Message[]> = await axios.get(`https://test-chat-backend-hwads.ondigitalocean.app/api/messages?skip=${skip}&limit=${limit}`)\r\n            dispatch({type: HistoryMessagesEnums.FETCH_HISTORY_SUCCESS, payload: response.data.reverse()})\r\n        } catch (error) {\r\n            dispatch({type: HistoryMessagesEnums.FETCH_HISTORY_ERROR, payload: 'Loading error!'})\r\n        }\r\n    }\r\n}\r\n\r\nexport const setMessage = (message: Message) => {\r\n    return async (dispatch: Dispatch<HistoryMessagesTypes>) => {\r\n        try {\r\n            dispatch({type: HistoryMessagesEnums.SET_MESSAGE, payload: message})\r\n        } catch (error) {\r\n            dispatch({type: HistoryMessagesEnums.FETCH_HISTORY_ERROR, payload: 'Loading error!'})\r\n        }\r\n    }\r\n}\r\n","import * as HistoryMessagesCreators from './historyMessages'\r\n\r\nexport default {\r\n    ...HistoryMessagesCreators\r\n}\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport {Socket} from \"socket.io-client\";\r\nimport cls from \"./ChatBody.module.css\";\r\n\r\nimport {Message} from \"../../types/historyMessages\";\r\nimport PreloaderConnection from \"../PreloaderConnection/PreloaderConnection\";\r\nimport MessageItem from \"../MessageItem/MessageItem\";\r\n\r\n\r\nimport {useTypedSelector} from \"../../hooks/useTypedSelector\";\r\nimport {useActions} from \"../../hooks/useActions\";\r\n\r\n\r\n\r\n\r\n\r\n\r\ninterface PropsType {\r\n    newMessage: string\r\n    socket: Socket\r\n}\r\n\r\nconst ChatBody: React.FC<PropsType> = ({newMessage, socket}) => {\r\n    const {historyMessages, limit, skip, error} = useTypedSelector(state => state.historyMessages)\r\n    const chatBodyRef = React.useRef<HTMLDivElement>(null);\r\n    const lastMessageRef = React.useRef<HTMLDivElement>(null);\r\n    const messagesEndRef = useRef<HTMLDivElement>(null);\r\n    const {fetchHistoryMessages, setMessage} = useActions()\r\n    const [viewHistory, setViewHistory] = useState<boolean>(false)\r\n    const [socketConnected, setSocketConnected] = useState<true | false>(true)\r\n    const [lastPosition, setLastPosition] = useState<number>(0)\r\n\r\n    //imitation of disconnect\r\n    const imitation = () => {\r\n        setTimeout(() => {\r\n            socket.disconnect()\r\n        }, 30000)\r\n        setTimeout(() => {\r\n            socket.connect()\r\n        }, 60000)\r\n    }\r\n\r\n    //Socket check connection\r\n    useEffect(() => {\r\n        socket = socket.connect()\r\n        socket.on('connect', function() {\r\n            setSocketConnected(socket.connected)\r\n            socket.on('disconnect', function(){\r\n                setSocketConnected(socket.connected)\r\n            });\r\n            socket.on('message', (data) => {\r\n                setMessage(data)\r\n            });\r\n        });\r\n        // imitation()\r\n    }, [])\r\n\r\n\r\n    // If sent new message from Form\r\n    useEffect(() => {\r\n        if (newMessage) {\r\n            const nowDate = new Date()\r\n            const message: Message = {\r\n                from: 'me',\r\n                createdAt: nowDate.toISOString(),\r\n                id: Math.random().toString(16).slice(2),\r\n                text: newMessage\r\n            }\r\n            if (socketConnected) {\r\n                setMessage(message)\r\n                socket.emit('message', {from: 'meVadim', text: newMessage})\r\n            }\r\n        }\r\n    }, [newMessage])\r\n\r\n\r\n    //Add event listener when scrolling chat\r\n    useEffect(() => {\r\n        fetchHistoryMessages(limit, skip)\r\n        chatBodyRef.current!.addEventListener('scroll', scrollHandler)\r\n    }, [])\r\n\r\n\r\n    //if updated historyMessages, go to bottom of chat\r\n    useEffect(() => {\r\n        if (!viewHistory) {\r\n           //If view realtime chat, set scroll to the end of the list messages\r\n            chatBodyRef.current!.scrollTop = chatBodyRef.current!.scrollHeight - chatBodyRef.current!.clientHeight\r\n        }\r\n        if (viewHistory) {\r\n            //If view history, set scroll to the first message in the last portion\r\n            chatBodyRef.current!.scrollTop = lastPosition\r\n        }\r\n    }, [historyMessages])\r\n\r\n\r\n    //Fetching new portion messages\r\n    let count = 0\r\n    const fetchingPortion = () => {\r\n        count = count + 15\r\n        fetchHistoryMessages(limit, count)\r\n    }\r\n\r\n    const toggleHistoryFlag = (scrollTop: number, scrollHeight: number, clientHeight: number) => {\r\n        if (scrollTop < scrollHeight - clientHeight) {\r\n            //If started scrolling the page, set the flag viewHistory == true\r\n            setViewHistory(true)\r\n        } else if (scrollTop === scrollHeight - clientHeight) {\r\n            //If scroll position at bottom, set the flag viewHistory == false\r\n            setViewHistory(false)\r\n        }\r\n    }\r\n\r\n    //If scrolled chat at top, fetching new portion messages\r\n    const scrollHandler = (e: any) => {\r\n        const scrollTop = e.target.scrollTop //Высота верхней невидимой области контента за пределами блока\r\n        const scrollHeight = chatBodyRef.current!.scrollHeight //Общая высота контента\r\n        const clientHeight = chatBodyRef.current!.clientHeight //Высота видимой части блока\r\n\r\n        //If scroll position at top, fetching new portion of messages\r\n        if (e.target.scrollTop === 0) {\r\n            fetchingPortion()\r\n        }\r\n\r\n        //If started scrolling chat, remember last message on the list\r\n        if (scrollTop < (scrollHeight - clientHeight) && scrollTop > (scrollHeight - clientHeight - 10)) {\r\n            setLastPosition(lastMessageRef.current!.offsetTop)\r\n        }\r\n\r\n        toggleHistoryFlag(scrollTop, scrollHeight, clientHeight)\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    if (error) return <div><h1>{error}</h1></div>\r\n\r\n    return (\r\n        <div className={cls.chatBody} ref={chatBodyRef}>\r\n            {\r\n                historyMessages.map((message, index) => {\r\n                    return (\r\n                        <div key={message.id + index} className={cls.MessageId}>\r\n                            {\r\n                                index === 14 &&\r\n                                <div ref={lastMessageRef} style={{fontSize: 1, lineHeight: 1, height: 1}}>&nbsp;</div>\r\n                            }\r\n                            <MessageItem message={message} index={index} />\r\n                        </div>\r\n                    )\r\n                })\r\n            }\r\n\r\n            {!socketConnected && <PreloaderConnection/>}\r\n            <div className={cls.messagesEndRef} ref={messagesEndRef}></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ChatBody;\r\n","import {useDispatch} from \"react-redux\";\r\nimport {bindActionCreators} from \"redux\";\r\nimport ActionCreators from \"../store/action-creators\"\r\n\r\nexport const useActions = () => {\r\n    const dispatch = useDispatch()\r\n    return bindActionCreators(ActionCreators, dispatch)\r\n}\r\n","import React, {useRef} from 'react';\r\nimport cls from \"./MessageForm.module.css\";\r\nimport {Field, Form} from \"react-final-form\";\r\nimport SentimentSatisfiedAltIcon from '@mui/icons-material/SentimentSatisfiedAlt';\r\n\r\n\r\n\r\ninterface PropsType {\r\n    onSubmit: (values: any) => void\r\n    changeMessage: (values: any) => void\r\n    insertEmoji: () => void\r\n    tempNewMessageText: string\r\n}\r\nconst MessageForm: React.FC<PropsType> = ({onSubmit, changeMessage, insertEmoji, tempNewMessageText}) => {\r\n    const messageFieldRef = useRef<HTMLInputElement>(null);\r\n\r\n    const clickOnEmoji = () => {\r\n        insertEmoji()\r\n        messageFieldRef.current?.focus()\r\n    }\r\n\r\n    return (\r\n        <Form\r\n            onSubmit={onSubmit}\r\n            initialValues={{ message: tempNewMessageText }}\r\n            render={({ handleSubmit, form, submitting, pristine, values }) => (\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className={cls.chatForm}>\r\n                        <div className={cls.textField}>\r\n                            <Field name=\"message\">\r\n                                {props => (\r\n                                    <div>\r\n                                        <input\r\n                                            ref={messageFieldRef}\r\n                                            {...props.input}\r\n                                            type=\"text\"\r\n                                            placeholder=\"Напишите сообщение\"\r\n                                            autoComplete={'off'}\r\n                                            onChange={(e) => changeMessage(e.target.value)}\r\n                                        />\r\n                                    </div>\r\n                                )}\r\n                            </Field>\r\n\r\n                        </div>\r\n                        <div className={cls.formButton}>\r\n                            <SentimentSatisfiedAltIcon\r\n                                sx={{ color: \"#ffffff\", opacity: \"0.3\", cursor: \"pointer\" }}\r\n                                onClick={clickOnEmoji}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            )}\r\n        />\r\n    );\r\n};\r\n\r\nexport default MessageForm;\r\n","import React, {useState} from 'react';\r\nimport cls from \"./ControlPanel.module.css\";\r\nimport { ShrinkOutlined, MinusOutlined } from '@ant-design/icons';\r\n\r\ninterface PropsType {\r\n    hideChatToggle: () => void\r\n}\r\n\r\nconst ControlPanel: React.FC<PropsType> = ({hideChatToggle}) => {\r\n\r\n    return (\r\n        <div className={cls.controlPanel}>\r\n            <span className={cls.expandMenu}>\r\n                <ShrinkOutlined style={{fontSize: '14px', color: '#ffffff', lineHeight: '16px'}}/>\r\n            </span>\r\n            <span className={cls.minimizeMenu} onClick={hideChatToggle}>\r\n                <MinusOutlined style={{fontSize: '14px', color: '#ffffff', lineHeight: '16px'}}/>\r\n            </span>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ControlPanel;\r\n","import React, {useState} from 'react';\r\nimport cls from \"./MenuLanguage.module.css\";\r\nimport {Dropdown, Menu} from \"antd\";\r\nimport { DownOutlined } from '@ant-design/icons';\r\n\r\n\r\nconst MenuLanguage = () => {\r\n    const [lang, setLanguage] = useState<string>('Ru');\r\n\r\n    const changeLang = (value: any) => {\r\n        setLanguage(value.key);\r\n    };\r\n\r\n\r\n\r\n    const menu = (\r\n        <Menu onClick={changeLang}>\r\n            <Menu.Item key=\"Ru\">\r\n                Ru\r\n            </Menu.Item>\r\n            <Menu.Item key=\"En\">\r\n                En\r\n            </Menu.Item>\r\n        </Menu>\r\n    );\r\n\r\n\r\n    return (\r\n        <div className={cls.menuLang}>\r\n            <Dropdown overlay={menu} trigger={['click']}>\r\n                <a className={cls.langLink + \" ant-dropdown-link\"} onClick={e => e.preventDefault()}>\r\n                    {lang} <DownOutlined />\r\n                </a>\r\n            </Dropdown>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MenuLanguage;\r\n","import React, {useState} from 'react';\r\nimport {Socket} from \"socket.io-client\";\r\nimport cls from './Chat.module.css'\r\n\r\nimport ChatBody from \"../../common/ChatBody/ChatBody\";\r\nimport MessageForm from \"../../common/MessageForm/MessageForm\";\r\nimport ControlPanel from \"../../common/ControlPanel/ControlPanel\";\r\nimport MenuLanguage from \"../../common/MenuLanguage/MenuLanguage\";\r\n\r\nimport {createTheme, ThemeProvider} from '@mui/material/styles';\r\nimport Box from '@mui/material/Box';\r\nimport Tabs from '@mui/material/Tabs';\r\nimport Tab from '@mui/material/Tab';\r\nimport {TabContext, TabPanel} from '@mui/lab';\r\nimport {green} from '@mui/material/colors';\r\n\r\nimport 'antd/dist/antd.css';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\ninterface PropsType {\r\n    socket: Socket\r\n}\r\n\r\nconst Chat: React.FC<PropsType> = ({socket}) => {\r\n    const [tab, setTab] = useState<string>('1');\r\n    const [newMessage, setNewMessage] = useState<string>('');\r\n    const [tempNewMessageText, setTempNewMessageText] = useState<string>('');\r\n    const [hideChat, setHideChat] = useState<boolean>(false)\r\n\r\n\r\n\r\n\r\n\r\n    const changeTab = (event: React.SyntheticEvent, newValue: string) => {\r\n        setTab(newValue);\r\n    };\r\n\r\n    const hideChatToggle = () => {\r\n        setHideChat(!hideChat)\r\n    }\r\n\r\n    const innerTheme = createTheme({\r\n        palette: {\r\n            primary: {\r\n                main: green[500],\r\n            },\r\n        },\r\n    });\r\n\r\n    //Writing new message\r\n    const changeMessage = (value: string) => {\r\n        setTempNewMessageText(value)\r\n    };\r\n\r\n    const insertEmoji = () => {\r\n        setTempNewMessageText(tempNewMessageText + ' :)')\r\n    }\r\n    const onSubmit = () => {\r\n        setNewMessage(tempNewMessageText)\r\n        setTempNewMessageText('')\r\n    };\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div className={cls.chat}>\r\n            <TabContext value={tab}>\r\n                <div className={cls.chatHeader}>\r\n                    <div className={cls.headerMenu}>\r\n                        <Box sx={{maxWidth: 270}}>\r\n                            <ThemeProvider theme={innerTheme}>\r\n                                <Tabs\r\n                                    value={tab}\r\n                                    onChange={changeTab}\r\n                                    variant=\"scrollable\"\r\n                                    scrollButtons=\"auto\"\r\n                                    sx={{color: \"#ffffff\", padding: 0, margin: 0}}\r\n                                >\r\n                                    <Tab label=\"Общий\" value=\"1\" sx={{color: \"#ffffff\"}}/>\r\n                                    <Tab label=\"Клан\" value=\"2\" sx={{color: '#ffffff'}}/>\r\n                                    <Tab label=\"Друзья\" value=\"3\" sx={{color: '#ffffff'}}/>\r\n                                    <Tab label=\"Новости\" value=\"4\" sx={{color: '#ffffff'}}/>\r\n                                </Tabs>\r\n                            </ThemeProvider>\r\n                        </Box>\r\n                    </div>\r\n                    <MenuLanguage />\r\n                    <ControlPanel hideChatToggle={hideChatToggle} />\r\n                </div>\r\n                {\r\n                    !hideChat &&\r\n                    <>\r\n                        <div className={cls.chatBody}>\r\n                            <TabPanel value=\"1\" sx={{padding: 0}}>\r\n                                <div className={cls.chatContainer}>\r\n                                    <ChatBody newMessage={newMessage} socket={socket}/>\r\n                                </div>\r\n                            </TabPanel>\r\n                            <TabPanel value=\"2\">\r\n                                <div className={cls.chatContainer}>\r\n                                    Клан\r\n                                </div>\r\n                            </TabPanel>\r\n                            <TabPanel value=\"3\">\r\n                                <div className={cls.chatContainer}>\r\n                                    Друзья\r\n                                </div>\r\n                            </TabPanel>\r\n                            <TabPanel value=\"4\">\r\n                                <div className={cls.chatContainer}>\r\n                                    Новости\r\n                                </div>\r\n                            </TabPanel>\r\n                        </div>\r\n                        <div className={cls.chatFooter}>\r\n                            <MessageForm onSubmit={onSubmit} changeMessage={changeMessage} insertEmoji={insertEmoji} tempNewMessageText={tempNewMessageText} />\r\n                        </div>\r\n                    </>\r\n                }\r\n\r\n            </TabContext>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chat;\r\n","import React from 'react';\r\nimport './App.css';\r\nimport Chat from \"./components/chat/Chat\";\r\nimport {io} from \"socket.io-client\";\r\n\r\nfunction App() {\r\n    let socket = io(`wss://test-chat-backend-hwads.ondigitalocean.app`, {transports: [\"websocket\"]});\r\n    return (\r\n        <div className=\"Container\">\r\n            <Chat socket={socket} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import {HistoryMessagesEnums, HistoryMessagesTypes, HistoryState} from \"../../types/historyMessages\";\r\n\r\n\r\nconst initialState: HistoryState = {\r\n    historyMessages: [],\r\n    skip: 0,\r\n    limit: 15,\r\n    loading: false,\r\n    error: null\r\n}\r\n\r\nexport const historyReducer = (state = initialState, action: HistoryMessagesTypes): HistoryState => {\r\n    switch (action.type) {\r\n        case HistoryMessagesEnums.FETCH_HISTORY:\r\n            return {\r\n                ...state,\r\n                loading: true\r\n            }\r\n        case HistoryMessagesEnums.FETCH_HISTORY_SUCCESS:\r\n\r\n            return {\r\n                ...state,\r\n                historyMessages: [...action.payload, ...state.historyMessages],\r\n                loading: false,\r\n                error: null\r\n            }\r\n        case HistoryMessagesEnums.SET_MESSAGE:\r\n            return {\r\n                ...state,\r\n                historyMessages: [...state.historyMessages, action.payload],\r\n                loading: false,\r\n                error: null\r\n            }\r\n        case HistoryMessagesEnums.FETCH_HISTORY_ERROR:\r\n            return {\r\n                ...state,\r\n                loading: false,\r\n                error: action.payload\r\n            }\r\n        case HistoryMessagesEnums.SET_LIMIT_SKIP:\r\n            return {\r\n                ...state,\r\n                limit: action.payload.limit,\r\n                skip: action.payload.skip\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n","import {combineReducers} from \"redux\";\r\nimport {historyReducer} from \"./historyReducer\";\r\n\r\n\r\nexport const rootReducer = combineReducers({\r\n    historyMessages: historyReducer\r\n})\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>\r\n","import {applyMiddleware, createStore} from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport {rootReducer} from \"./reducers\";\r\n\r\n\r\nexport const store = createStore(rootReducer, applyMiddleware(thunk))\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {Provider} from \"react-redux\";\nimport {store} from \"./store\";\n\nReactDOM.render(\n    <Provider store={store}>\n        <App/>\n    </Provider>,\n    document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat\":\"Chat_chat__2Ty9G\",\"chatHeader\":\"Chat_chatHeader__3fBnA\",\"chatBody\":\"Chat_chatBody__2aeZg\",\"headerMenu\":\"Chat_headerMenu__CsuX_\",\"chatContainer\":\"Chat_chatContainer__2xaB2\",\"chatFooter\":\"Chat_chatFooter__2acPC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message\":\"MessageItem_message__2aEJG\",\"messageBlock\":\"MessageItem_messageBlock__1WN5I\",\"myMessage\":\"MessageItem_myMessage__3_2Js\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageHeader\":\"MessageHeader_messageHeader__18s-t\",\"avatar\":\"MessageHeader_avatar__17BFA\",\"userName\":\"MessageHeader_userName__3k1iK\",\"userRating\":\"MessageHeader_userRating__8MXPB\",\"badge\":\"MessageHeader_badge__giml3\"};"],"sourceRoot":""}